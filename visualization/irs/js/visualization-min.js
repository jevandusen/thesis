function drawStoryOptions(){d3.json("js/data/stories/stories.json",function(e){for(var t=0;t<e.stories.length;t++){var o=d3.select("#stories-select").append("div").attr("class","story-option-container").attr("id",e.stories[t].id).on("click",function(e,t){storyID=d3.select(this).attr("id"),d3.selectAll(".story-option-container").transition().duration(200).ease(d3.easeLinear).style("opacity",.1),d3.select("#"+storyID).transition().duration(200).ease(d3.easeLinear).style("opacity",1),drawStory(storyID)});d3.select("#"+e.stories[t].id).append("div").attr("class","story-option-circle").attr("id","story-option"+t).style("background","linear-gradient(rgba(241, 90, 36, 0.25),rgba(241, 90, 36, 0.25)), url('js/data/stories/images/"+e.stories[t].picture+"'), rgb(241, 90, 36)").style("background-size","10em");d3.select("#"+e.stories[t].id).append("div").attr("class","story-label").html("<p class='story-option-name'>"+e.stories[t].name+"</p><p class='story-option-quote'>&ldquo;"+e.stories[t].pull+"&rdquo;</p>")}})}function drawStory(e){d3.select(".storyTime").remove();var t=new ScrollMagic.Controller;TweenLite.defaultOverwrite=!1,d3.json("js/data/stories/stories.json",function(o){var r=o.stories.filter(function(t){return t.id===e});r=r[0];var s=r.name,n=r.bio,i=r.schoolBio;storySelected=r.name+" was",pageSix();var a=d3.select("#storyTime").append("div").attr("class","storyTime").html("<div id='storyName'></div><div id='storyBio'></div><div id='storySchoolBio'></div><div id='storyStories'></div>"),l=d3.select("#storyName").append("h1").attr("class","name").html("<span class='storyName'>"+s+"</span>"),c=d3.select("#storyBio").append("div").attr("class","bio").html("<p>"+n+"</p>"),d=d3.select("#storySchoolBio").append("div").attr("class","schoolBio").html("<p>"+i+"</p>");storyName_p=new ScrollMagic.Scene({triggerElement:"#storyName",duration:"100%"}).offset(document.getElementById("storyName").offsetHeight/2+"px").setPin("#storyName").addTo(t),storyBio_p=new ScrollMagic.Scene({triggerElement:"#storyBio",duration:"100%"}).offset(document.getElementById("storyBio").offsetHeight/2+"px").setPin("#storyBio").addTo(t),storySchoolBio_p=new ScrollMagic.Scene({triggerElement:"#storySchoolBio",duration:"100%"}).offset(document.getElementById("storySchoolBio").offsetHeight/2+"px").setPin("#storySchoolBio").addTo(t);for(var y=TweenMax.to("#storyName",.5,{opacity:"0"}),p=TweenMax.to("#storyBio",.5,{opacity:"0"}),g=TweenMax.to("#storySchoolBio",.5,{opacity:"0"}),m=new ScrollMagic.Scene({triggerElement:"#storyBio"}).triggerHook("onEnter").setTween(y).addTo(t),S=new ScrollMagic.Scene({triggerElement:"#storySchoolBio"}).triggerHook("onEnter").setTween(p).addTo(t),u=new ScrollMagic.Scene({triggerElement:"#storyStories"}).triggerHook("onEnter").setTween(g).addTo(t),f=0;f<r.story.length;f++){var h=d3.select("#storyStories").append("div").attr("class","storyStories").attr("id","story-"+f);""===r.story[f].quote?h.html("<p class='story-section'>"+r.story[f].section+"</p><p class='story-quote'>"+r.story[f].pre+"</p>"):h.html("<p class='story-section'>"+r.story[f].section+"</p><p class='story-pre'>"+r.story[f].pre+"</p><p class='story-quote'>&ldquo;"+r.story[f].quote+"&rdquo;</p>")}for(var f=0;f<r.story.length-1;f++){var w=f+1;storyStory_p=new ScrollMagic.Scene({triggerElement:"#story-"+f,duration:"100%"}).offset(document.getElementById("story-"+f).offsetHeight/2+"px").setPin("#story-"+f).addTo(t);var v=TweenMax.to("#story-"+f,.5,{opacity:"0"});f<r.story.length&&(storyStory_FO_s=new ScrollMagic.Scene({triggerElement:"#story-"+w}).triggerHook("onEnter").setTween(v).addTo(t))}var T=r.story.length-1;storyStory_last_p=new ScrollMagic.Scene({triggerElement:"#story-"+T,duration:"100%"}).offset(document.getElementById("story-"+T).offsetHeight/2+"px").setPin("#story-"+T).addTo(t)})}function pageSix(){d3.select(".p6header").remove();var e=d3.select("#p6header").append("h1").attr("class","p6header").html(storySelected+" one of an estimated <span class='orange'>150,000</span> Aboriginal children to attend a residential school in Canada."),t=d3.select("#p6header2").append("h1").attr("class","p6header").html("<span class='orange'>132</span> schools operated in every Canadian province and territory except Newfoundland, Prince Edward Island, or New Brunswick."),o=new ScrollMagic.Controller;TweenLite.defaultOverwrite=!1}function studentCircles(){console.log("do it!")}window.onload=drawStoryOptions;var storyID="bbaxter",storySelected="These students were";$(function(){$.scrollify({section:"section",sectionName:"chapter-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,standardScrollElements:".free-scroll",setHeights:!1,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}})}),jQuery("#stories-select").draggable({axis:"x",cursor:"move",containment:"stories"});var controller=new ScrollMagic.Controller;TweenLite.defaultOverwrite=!1;var drawStory_s=new ScrollMagic.Scene({triggerElement:"#p4"}).on("enter",function(e){drawStory(storyID),pageSix()}).triggerHook("onEnter").addTo(controller);