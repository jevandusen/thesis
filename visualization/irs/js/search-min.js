function runSearch(t){""===t?(drawStory("aelias"),pageSix("Albert Elias")):d3.json("js/data/search_terms.json",function(e){var s=e.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()});s=s[0];var o=s.id,l=s.type;"story"===l?(drawStory(o),pageSix(t),document.querySelector("#p5").scrollIntoView({behavior:"smooth"}),d3.selectAll(".story-option-container").transition().duration(200).ease(d3.easeLinear).style("opacity",.1),d3.select("#"+o).transition().duration(200).ease(d3.easeLinear).style("opacity",1)):"reservation"===l?(document.querySelector("#tMap1_reserves").scrollIntoView({behavior:"smooth"}),rSearch(o)):(document.querySelector("#tMap1_reserves").scrollIntoView({behavior:"smooth"}),sSearch(o))})}function rSearch(t){d3.selectAll(".rDot").style("opacity",".025").style("fill","#333"),d3.select("#rDot-"+t).style("opacity",".75").style("fill",orange),d3.selectAll(".rTooltip").style("opacity","0"),d3.selectAll(".dot").style("opacity",".25").style("fill",orange),d3.selectAll(".conn").style("opacity",".05"),d3.selectAll(".sTooltip").style("opacity",0),d3.selectAll(".sTooltip2").style("opacity",0),d3.selectAll("#rTip-"+t).style("opacity","1.0")}function sSearch(t){d3.selectAll(".dot").style("opacity",".25").style("fill",orange),d3.select("#dot-"+t).style("opacity",1).style("fill","#333"),d3.selectAll(".sTooltip").style("opacity",0),d3.selectAll(".sTooltip2").style("opacity",0),d3.selectAll("#sTip-"+t).style("opacity",1),d3.selectAll(".rDot").style("opacity",".025").style("fill","#333"),d3.selectAll(".rTooltip").style("opacity","0"),d3.selectAll(".conn").style("opacity",".05")}var orange="#f15a24";!function($){$.fn.suggest=function(t,e){var s=$.extend({suggestionColor:"#ccc",moreIndicatorClass:"suggest-more",moreIndicatorText:"&hellip;"},e);return this.each(function(){$this=$(this);var e=$("<div/>",{css:{fontFamily:$this.css("fontFamily"),fontSize:$this.css("fontSize"),fontStyle:$this.css("fontStyle"),lineHeight:$this.css("lineHeight"),fontWeight:$this.css("fontWeight"),letterSpacing:$this.css("letterSpacing"),backgroundColor:$this.css("backgroundColor"),color:s.suggestionColor,fontKerning:$this.css("fontKerning"),textAlign:"left",zIndex:"100"}});e.addClass("suggest");var o=$("<span/>",{css:{position:"absolute",top:e.height()+parseInt($this.css("fontSize"),10)/2,left:e.width(),display:"block",fontSize:$this.css("fontSize"),fontFamily:$this.css("fontFamily"),color:s.suggestionColor},class:s.moreIndicatorClass}).html(s.moreIndicatorText).hide();$this.attr({autocomplete:"off",spellcheck:"false",dir:"ltr"}).css({background:"transparent"}).wrap($("<div/>",{css:{position:"relative",paddingBottom:"1em"}})).bind("keydown.suggest",function(t){var s=t.keyCode?t.keyCode:t.which;if(9!=s||t.altKey){if(13==s)e.is(":empty")||t.preventDefault();else if(38==s||40==s){t.preventDefault();var o=$(this).data("suggestions");o.all.length>1&&(40==s&&o.index<o.all.length-1?o.suggest.html(o.all[++o.index]):38==s&&o.index>0&&o.suggest.html(o.all[--o.index]),$(this).data("suggestions").index=o.index)}}else t.preventDefault()}).bind("keyup.suggest",function(s){var l=s.keyCode?s.keyCode:s.which;if(38==l||40==l)return!1;o.hide();var i=$(this).val(),n=i.replace(" ","&nbsp;");if((9==l||13==l)&&e.text().length>0){s.preventDefault();var a=$(this).data("suggestions");return $(this).val(a.terms[a.index]),e.empty(),!1}if(e.empty(),!$.trim(i).length)return!1;for(var r=new RegExp("^"+i.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i"),a=[],c=[],h=0,d=t;h<d.length;h++)r.test(d[h])&&(c.push(d[h]),a.push(n+d[h].slice(i.length)));a.length>0&&(a[0]!==i&&e.html(a[0]),$(this).data("suggestions",{all:a,terms:c,index:0,suggest:e}),a.length>1&&o.show())}).bind("blur.suggest",function(){e.empty()}),e.insertAfter($this),o.insertAfter(e)})},$.fn.cssShortForAllSides=function(t){var e=$(this),s=[],o=$.map(["Top","Right","Bottom","Left"],function(e){return t+e});return $.each(o,function(t,o){s.push(e.css(o)||"0")}),s.join(" ")}}(jQuery);var haystack=[];d3.json("js/data/search_terms.json",function(t){for(var e=0;e<t.length;e++)haystack.push(t[e].name)}),$(function(){$("#search").suggest(haystack,{suggestionColor:"#cccccc",moreIndicatorClass:"suggest-more",moreIndicatorText:""})}),$("#search").on("change",function(){runSearch($(this).val())});